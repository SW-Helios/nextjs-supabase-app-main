{
  "tasks": [
    {
      "id": "b5a14cc5-edca-4b45-8058-d0f48ed65c44",
      "name": "데이터베이스 UNIQUE 제약 조건 추가",
      "description": "event_participants 테이블에 (user_id, event_id) 조합의 UNIQUE 제약 조건을 추가하여 동일한 사용자가 같은 이벤트에 중복 참여하는 것을 데이터베이스 레벨에서 방지합니다.",
      "notes": "제약 조건 추가 전에 기존 데이터에 중복이 없는지 반드시 확인하세요. 중복이 있으면 제약 조건 추가가 실패합니다.",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2025-10-17T08:14:29.232Z",
      "updatedAt": "2025-10-17T08:24:35.887Z",
      "relatedFiles": [
        {
          "path": "supabase/migrations",
          "type": "CREATE",
          "description": "새 마이그레이션 파일 생성"
        }
      ],
      "implementationGuide": "1. Supabase MCP의 apply_migration 도구 사용\\n2. 마이그레이션 이름: add_unique_constraint_to_event_participants\\n3. SQL 쿼리:\\n   -- 먼저 중복 데이터 확인\\n   -- SELECT user_id, event_id, COUNT(*) FROM event_participants GROUP BY user_id, event_id HAVING COUNT(*) > 1;\\n   \\n   -- 제약 조건 추가\\n   ALTER TABLE event_participants\\n   ADD CONSTRAINT event_participants_user_event_unique\\n   UNIQUE (user_id, event_id);\\n4. 마이그레이션 적용 후 테스트:\\n   - 동일한 user_id, event_id로 INSERT 시도\\n   - 23505 에러 코드 확인\\n5. 중복 데이터가 있다면 수동 제거 후 재시도",
      "verificationCriteria": "1. 마이그레이션이 성공적으로 적용됨\\n2. 동일한 user_id, event_id로 INSERT 시도하면 23505 에러 발생\\n3. 기존 데이터 무결성 유지\\n4. Supabase Dashboard에서 제약 조건 확인 가능",
      "analysisResult": "Task 010: 참여자 관리 (간소화 버전) - 초대 링크를 통한 이벤트 참여, 중복 참여 방지, 내가 참여한/만든 이벤트 목록 조회 기능을 구현합니다. Realtime 기능은 제외하고, 페이지 새로고침 시 Server Component 재검증으로 참여자 수를 업데이트합니다.",
      "summary": "데이터베이스 조회 결과, event_participants 테이블에 UNIQUE 제약 조건이 이미 존재합니다 (event_participants_event_id_user_id_key). 제약 조건 정의: UNIQUE (event_id, user_id). 중복 데이터도 없음을 확인했습니다. 따라서 마이그레이션 추가가 필요하지 않으며, 작업이 이미 완료된 상태입니다.",
      "completedAt": "2025-10-17T08:24:35.879Z"
    }
  ]
}